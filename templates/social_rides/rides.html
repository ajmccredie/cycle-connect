{% extends 'base4.html' %}

{% block content %}
<h1>Planned Social Rides</h1>
<a href="{% url 'add_ride' %}" class="btn btn-edit">Create New Ride</a>
<div class="rides-list">
    {% for ride in rides %}
    <div class="ride">
        <h2><a href="{% url 'ride_details' pk=ride.pk %}">{{ ride.title }}</a>
            {% if ride.id in registered_ride_ids %}
            <i class="fas fa-bicycle"></i>
            {% endif %}
        </h2>
        {% if ride.is_canceled %}
            <div class="alert alert-warning" role="alert">
                <h2>Sorry, this ride has been cancelled.</h2>
            </div>
        {% else %}
            <p>Spaces Left: {{ ride.spaces_left }}</p>
        {% endif %}
        {% if request.user == ride.organiser %}
                <a href="{% url 'edit_ride' ride.id %}" class="btn btn-edit">Edit</a>
                <a href="{% url 'delete_ride' ride.id %}" class="btn btn-delete">Delete</a>
                <a href="{% url 'cancel_ride' ride.id %}" class="btn btn-delete">Cancel</a>
                {% endif %}
        <p>Date: {{ ride.date }} Time: {{ ride.start_time }}</p>
        <p>Length: {{ ride.distance }} km </p>
        {% if ride.image %}
        <img src="{{ ride.image.url }}" alt="{{ ride.title }}">
        {% endif %}
    </div>
    {% empty %}
    <p>No rides planned at the moment.</p>
    {% endfor %}
</div>
{% endblock %}